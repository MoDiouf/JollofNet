<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/css/dash.css" />
  <link rel="stylesheet" href="/css/global.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script defer src="/js/homeNav.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <title><%= title %></title>
</head>
<body>
  <div class="loader-container" id="loader-container">
    <div class="loader"></div>
  </div>
  <span class="bckg"></span>
  <header>
    <h1>Dashboard</h1>
    <nav>
      <ul>
        <li>
          <a href="/app/addNetwork" data-title="Projects"><i class="fas fa-network-wired" style="margin-right: 10px;"></i>Ajouter un réseau</a>
        </li>
        <li>
          <a href="/app/manage" data-title="Manage"><i class="fas fa-cogs" style="margin-right: 10px;"></i>Gérer mes réseaux</a>
        </li>
        <li>
          <a href="/app/statistics" data-title="Statistique"> <i class="fas fa-chart-bar" style="margin-right: 10px;"></i>Statistiques</a>
        </li>
        <li>
          <a href="/app/profil" data-title="profil"> <i class="fas fa-user" style="margin-right: 10px;"></i>Profil</a>
        </li>
      </ul>
    </nav>
  </header>
  <main>
    <div class="title">
      <h2></h2>
      <a href="javascript:void(0);"><i class="fas fa-user" style="font-size: 30px;margin-right: 10px;"></i>Hello <%= name %> !</a>
    </div>

    <!-- Affichez le contenu dynamique ici -->
    <div>
      <% if (content === 'addNetwork') { %>
        <%- include('./addNetwork') %>
      <% } else if (content === 'manageNetworks') { %>
        <%- include('./manageNet') %>
      <% } else if (content === 'statistics') { %>
        <%- include('./statistique') %>
      <% } else if (content === 'profil') { %>
        <%- include('./profil') %>
      <% } %>
    </div>

  </main>
 
  <script>
    // Masquer le loader après le chargement de la page
    window.addEventListener('load', function() {
      const loaderContainer = document.getElementById('loader-container');
      loaderContainer.classList.add('hidden');
    });
  </script>
  
  <script>
     window.addEventListener('load', function() {
      const loaderContainer = document.getElementById('loader-container');
      loaderContainer.classList.add('hidden');
    });
    
    document.querySelectorAll('.toggle-section').forEach((heading) => {
  heading.addEventListener('click', function () {
    const content = this.nextElementSibling; // La section de contenu associée
    if (content) {
      // Fermer les autres sections si vous voulez un seul contenu ouvert
      document.querySelectorAll('.section-content').forEach((otherContent) => {
        if (otherContent !== content) {
          // Animation de fermeture pour les autres sections ouvertes
          anime({
            targets: otherContent,
            opacity: [1, 0],
            height: [otherContent.scrollHeight, 0], // Animation de hauteur
            duration: 500,
            easing: 'easeInQuad',
            complete: function () {
              otherContent.style.display = 'none';
            }
          });
        }
      });

      // Ouvrir ou fermer la section cliquée
      if (content.style.display === 'none' || content.style.display === '') {
        // Réinitialiser la hauteur avant l'animation pour éviter le chevauchement
        content.style.display = 'block';
        content.style.height = '0';
        content.offsetHeight; // Re-calculer la hauteur pour forcer le recalcul du style

        anime({
          targets: content,
          opacity: [0, 1],
          height: [0, content.scrollHeight], // Transition de hauteur dynamique
          duration: 500,
          easing: 'easeOutQuad',
        });
      } else {
        // Cacher la section avec animation
        anime({
          targets: content,
          opacity: [1, 0],
          height: [content.scrollHeight, 0], // Transition de hauteur dynamique
          duration: 500,
          easing: 'easeInQuad',
          complete: function () {
            content.style.display = 'none';
          }
        });
      }
    }
  });
});

    document.querySelectorAll('nav a').forEach((link) => {
      link.addEventListener('click', function () {
        document.querySelectorAll('main section').forEach((section) => {
          section.style.display = 'none';
        });

        const sectionToShow = document.getElementById(this.getAttribute('data-title'));
        if (sectionToShow) {
          sectionToShow.style.display = 'block';
        }
      });
    });
  </script>

</body>
</html>
